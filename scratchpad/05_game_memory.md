# Game Memory Module

- Initializes and incrementally builds memory structures reflecting game meta-progress.
- Tracks player sessions, using default or updated player names.
- Stores persistent game object memory and meta-progress using TinyDB.
- Heuristically parses game controller inputs into structured memory of game elements.
- Reads AI buddy memory structure JSON to shape memory schemas.
- Prepares prompts for AI structured-output inference and narration inference.
- Parses AI streaming outputs into game memory structures.

## Scene Object

Define a `Scene` class to persist enrich metadata from `EngineTurn` data and persist accumulative state artifacts between turns.

Fields:
- `room_name`: string name of the EngineTurns persisted in this Scene
- `description_lines`: array of strings — an accumulative, non-duplicative list of lines appearing in `EngineTurn.description`. New lines are appended only if not already present.
- `sceneItems`:  an accumulative, non-duplicative list of seen in-game objects
- `currentItems`: list of current in-game objects as it last ended/resulted within this Scene
- `sceneActions`: an accumulative, non-duplicative list of commands and results occuring in this Scene, including the command/way of exit
- `sceneIntroCollection`: a collection of objects with: the previous room name(s), move number(s) and command/action(s) that have taken the player into this Scene
- `NPCs`: an accumulative, non-duplicative list of NPC names seen in this Scene

AI Inferred fields:
- `Narrations`: array of strings — an accumulative, non-duplicative list of Narrations generated by the AI completions engine. New lines are appended only if not already present.
- TBD

Responsibilities:
- Instantiate a `Scene` from the first `EngineTurn` appearance
- extracting and persisting memory fields on subsequent appearances including additional turns in the same room
- Maintain `description_lines` as a running union of narrative lines, avoiding duplicates.
- Provide serialization/deserialization to the TinyDB store.
- Store, Update and Retrieve in-databse persistance of the Scene

## Workflow

1. Receive `EngineTurn` from `GameAPI`.
2. Create a new `Scene` or update existing scene for the current room.
3. Append, update
4. Persist updated `Scene` to the database.
5. Use `Scene` memory when building AI prompts or UI updates.